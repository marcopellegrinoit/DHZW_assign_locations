df_shopping_od$hh_PC4 <- DHZW_PC4_codes
for (hh_PC4 in str(DHZW_PC4_codes)) {
for (PC4 in str(DHZW_PC4_codes)) {
df_shopping_od[df_shopping_od$hh_PC4 == hh_PC4, PC4,] <- nrow(df_shopping[df_shopping$hh_PC4 == hh_PC4 & df_shopping$disp_arrival_PC4 == PC4,])
}
}
View(df_shopping_od)
nrow(df_shopping[df_shopping$hh_PC4 == hh_PC4 & df_shopping$disp_arrival_PC4 == PC4,])
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_shopping_od <- data.frame(matrix(ncol = (length(DHZW_PC4_codes)+1), nrow = length(DHZW_PC4_codes)))
colnames(df_shopping_od) <- append('hh_PC4', DHZW_PC4_codes)
df_shopping_od[is.na(df_shopping_od)] <- 0
df_shopping_od$hh_PC4 <- DHZW_PC4_codes
for (hh_PC4 in DHZW_PC4_codes) {
for (PC4 in DHZW_PC4_codes) {
df_shopping_od[df_shopping_od$hh_PC4 == hh_PC4, PC4,] <- nrow(df_shopping[df_shopping$hh_PC4 == hh_PC4 & df_shopping$disp_arrival_PC4 == PC4,])
}
}
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_shopping_od <- data.frame(matrix(ncol = (length(DHZW_PC4_codes)+1), nrow = length(DHZW_PC4_codes)))
colnames(df_shopping_od) <- append('hh_PC4', DHZW_PC4_codes)
df_shopping_od[is.na(df_shopping_od)] <- 0
df_shopping_od$hh_PC4 <- DHZW_PC4_codes
for (hh_PC4 in DHZW_PC4_codes) {
for (PC4 in DHZW_PC4_codes) {
df_shopping_od[df_shopping_od$hh_PC4 == hh_PC4, PC4] <- nrow(df_shopping[df_shopping$hh_PC4 == hh_PC4 & df_shopping$disp_arrival_PC4 == PC4,])
}
}
df_shopping_od[df_shopping_od$hh_PC4 == hh_PC4, PC4]
df_shopping_od[df_shopping_od$hh_PC4 == 2531, PC4]
View(df_shopping_od)
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_shopping_od <- data.frame(matrix(ncol = (length(DHZW_PC4_codes)+1), nrow = length(DHZW_PC4_codes)))
colnames(df_shopping_od) <- append('hh_PC4', DHZW_PC4_codes)
df_shopping_od[is.na(df_shopping_od)] <- 0
df_shopping_od$hh_PC4 <- DHZW_PC4_codes
for (hh_PC4 in toString(DHZW_PC4_codes)) {
for (PC4 in toString(DHZW_PC4_codes))) {
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_shopping_od <- data.frame(matrix(ncol = (length(DHZW_PC4_codes)+1), nrow = length(DHZW_PC4_codes)))
colnames(df_shopping_od) <- append('hh_PC4', DHZW_PC4_codes)
df_shopping_od[is.na(df_shopping_od)] <- 0
df_shopping_od$hh_PC4 <- DHZW_PC4_codes
for (hh_PC4 in toString(DHZW_PC4_codes)) {
for (PC4 in toString(DHZW_PC4_codes)) {
df_shopping_od[df_shopping_od$hh_PC4 == hh_PC4, PC4] <- nrow(df_shopping[df_shopping$hh_PC4 == hh_PC4 & df_shopping$disp_arrival_PC4 == PC4,])
}
}
View(df_shopping_od)
toString(DHZW_PC4_codes)
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_shopping_od <- data.frame(matrix(ncol = (length(DHZW_PC4_codes)+1), nrow = length(DHZW_PC4_codes)))
colnames(df_shopping_od) <- append('hh_PC4', DHZW_PC4_codes)
df_shopping_od[is.na(df_shopping_od)] <- 0
df_shopping_od$hh_PC4 <- DHZW_PC4_codes
for (hh_PC4 in df_shopping_od$hh_PC4) {
for (PC4 in colnames(df_shopping_od)) {
if (PC4 != 'hh_PC4') {
df_shopping_od[df_shopping_od$hh_PC4 == hh_PC4, PC4] <- nrow(df_shopping[df_shopping$hh_PC4 == hh_PC4 & df_shopping$disp_arrival_PC4 == PC4,])
}
}
}
View(df_shopping_od)
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_shopping_od <- data.frame(matrix(ncol = (length(DHZW_PC4_codes)+2), nrow = length(DHZW_PC4_codes)))
colnames(df_shopping_od) <- append('hh_PC4' , 'outside', DHZW_PC4_codes)
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_shopping_od <- data.frame(matrix(ncol = (length(DHZW_PC4_codes)+2), nrow = length(DHZW_PC4_codes)))
colnames(df_shopping_od) <- append('hh_PC4' , 'outside', DHZW_PC4_codes)
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_shopping_od <- data.frame(matrix(ncol = (length(DHZW_PC4_codes)+2), nrow = length(DHZW_PC4_codes)))
colnames(df_shopping_od) <- c('hh_PC4' , 'outside', DHZW_PC4_codes)
df_shopping_od[is.na(df_shopping_od)] <- 0
df_shopping_od$hh_PC4 <- DHZW_PC4_codes
for (hh_PC4 in df_shopping_od$hh_PC4) {
for (PC4 in colnames(df_shopping_od)) {
if (PC4 != 'hh_PC4') {
df_shopping_od[df_shopping_od$hh_PC4 == hh_PC4, PC4] <- nrow(df_shopping[df_shopping$hh_PC4 == hh_PC4 & df_shopping$disp_arrival_PC4 == PC4,])
}
}
}
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_shopping_od <- data.frame(matrix(ncol = (length(DHZW_PC4_codes)+2), nrow = length(DHZW_PC4_codes)))
colnames(df_shopping_od) <- c('hh_PC4' , 'outside', DHZW_PC4_codes)
df_shopping_od[is.na(df_shopping_od)] <- 0
df_shopping_od$hh_PC4 <- DHZW_PC4_codes
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_shopping_od <- data.frame(matrix(ncol = (length(DHZW_PC4_codes)+2), nrow = length(DHZW_PC4_codes)))
colnames(df_shopping_od) <- c('hh_PC4' , 'outside', DHZW_PC4_codes)
df_shopping_od[is.na(df_shopping_od)] <- 0
df_shopping_od$hh_PC4 <- DHZW_PC4_codes
for (hh_PC4 in df_shopping_od$hh_PC4) {
for (PC4 in colnames(df_shopping_od)) {
if (PC4 != 'hh_PC4') {
print(PC4)
df_shopping_od[df_shopping_od$hh_PC4 == hh_PC4, PC4] <- nrow(df_shopping[df_shopping$hh_PC4 == hh_PC4 & df_shopping$disp_arrival_PC4 == PC4,])
}
}
}
View(df_shopping)
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_shopping_od <- data.frame(matrix(ncol = (length(DHZW_PC4_codes)+2), nrow = length(DHZW_PC4_codes)))
colnames(df_shopping_od) <- c('hh_PC4' , 'outside DHZW', DHZW_PC4_codes)
df_shopping_od[is.na(df_shopping_od)] <- 0
df_shopping_od$hh_PC4 <- DHZW_PC4_codes
for (hh_PC4 in df_shopping_od$hh_PC4) {
for (PC4 in colnames(df_shopping_od)) {
if (PC4 != 'hh_PC4') {
print(PC4)
df_shopping_od[df_shopping_od$hh_PC4 == hh_PC4, PC4] <- nrow(df_shopping[df_shopping$hh_PC4 == hh_PC4 & df_shopping$disp_arrival_PC4 == PC4,])
}
}
}
output <- df_shopping_od %>%
as.data.frame %>%
mutate(newSum = select_if(., is.numeric) %>%
reduce(`+`)) %>%
mutate_if(is.numeric, list(~ ./newSum)) %>%
select(-newSum)
View(output)
df_shopping_od[-c('hh_PC4')]
df_shopping_od[-c('hh_PC4'),]
df_shopping_od[, -which(names(df) %in% c('hh_PC4'))]
output <- df_shopping_od[, -which(names(df_shopping_od) %in% c('hh_PC4'))]
output <- df_shopping_od[, -which(names(df_shopping_od) %in% c('hh_PC4'))] %>%
as.data.frame %>%
mutate(newSum = select_if(., is.numeric) %>%
reduce(`+`)) %>%
mutate_if(is.numeric, list(~ ./newSum)) %>%
select(-newSum)
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_shopping_od <- data.frame(matrix(ncol = (length(DHZW_PC4_codes)+2), nrow = length(DHZW_PC4_codes)))
colnames(df_shopping_od) <- c('hh_PC4' , 'outside DHZW', DHZW_PC4_codes)
df_shopping_od[is.na(df_shopping_od)] <- 0
df_shopping_od$hh_PC4 <- DHZW_PC4_codes
for (hh_PC4 in df_shopping_od$hh_PC4) {
for (PC4 in colnames(df_shopping_od)) {
if (PC4 != 'hh_PC4') {
df_shopping_od[df_shopping_od$hh_PC4 == hh_PC4, PC4] <- nrow(df_shopping[df_shopping$hh_PC4 == hh_PC4 & df_shopping$disp_arrival_PC4 == PC4,])
}
}
}
normalised <- df_shopping_od[, -which(names(df_shopping_od) %in% c('hh_PC4'))] %>%
as.data.frame %>%
mutate(newSum = select_if(., is.numeric) %>%
reduce(`+`)) %>%
mutate_if(is.numeric, list(~ ./newSum)) %>%
select(-newSum)
df_shopping_output <- cbind(normalised, df_shopping_od$hh_PC4)
View(df_shopping_output)
df_shopping_output <- df_shopping_output %>%
rename(`df_shopping_od$hh_PC4` = 'hh_PC4')
df_shopping_output <- df_shopping_output %>%
rename(`df_shopping_od$hh_PC4` = 'hh_PC4')
df_shopping_output <- df_shopping_output %>%
rename(`df_shopping_od$hh_PC4` = 'hh_PC4')
df_shopping_output <- df_shopping_output %>%
rename('hh_PC4' = `df_shopping_od$hh_PC4`)
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_shopping_od <- data.frame(matrix(ncol = (length(DHZW_PC4_codes)+2), nrow = length(DHZW_PC4_codes)))
colnames(df_shopping_od) <- c('hh_PC4' , 'outside DHZW', DHZW_PC4_codes)
df_shopping_od[is.na(df_shopping_od)] <- 0
df_shopping_od$hh_PC4 <- DHZW_PC4_codes
for (hh_PC4 in df_shopping_od$hh_PC4) {
for (PC4 in colnames(df_shopping_od)) {
if (PC4 != 'hh_PC4') {
df_shopping_od[df_shopping_od$hh_PC4 == hh_PC4, PC4] <- nrow(df_shopping[df_shopping$hh_PC4 == hh_PC4 & df_shopping$disp_arrival_PC4 == PC4,])
}
}
}
normalised <- df_shopping_od[, -which(names(df_shopping_od) %in% c('hh_PC4'))] %>%
as.data.frame %>%
mutate(newSum = select_if(., is.numeric) %>%
reduce(`+`)) %>%
mutate_if(is.numeric, list(~ ./newSum)) %>%
select(-newSum)
df_shopping_output <- cbind(normalised, df_shopping_od$hh_PC4)
df_shopping_output <- df_shopping_output %>%
rename('hh_PC4' = `df_shopping_od$hh_PC4`)
View(df_shopping_output)
setwd("~/Documents/DHZW/GitHub projects/DHZW_assign_locations")
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
source('utils.R')
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_shopping <- calculate_od_proportions(df_shopping)
View(df_shopping)
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
source('utils.R')
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_sport <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'sports/hobby',]
df_work <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'to work',]
df_shopping <- calculate_od_proportions(df_shopping)
df_sport <- calculate_od_proportions(df_sport)
df_work <- calculate_od_proportions(df_work)
View(df_work)
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
source('utils.R')
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_sport <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'sports/hobby',]
df_work <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'to work',]
df_shopping <- calculate_od_proportions(df_shopping)
df_sport <- calculate_od_proportions(df_sport)
df_work <- calculate_od_proportions(df_work)
# save
setwd(this.dir())
setwd('data')
write.csv(df_shopping, 'ODiN_shopping_destination_proportions.csv', row.names = FALSE)
write.csv(df_sport, 'ODiN_sport_destination_proportions.csv', row.names = FALSE)
write.csv(df_work, 'ODiN_work_destination_proportions.csv', row.names = FALSE)
library(readr)
library(dplyr)
library(this.path)
setwd(this.dir())
source('utils.R')
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/processed')
df_DHZW_trips <- read.csv('df_activity_trips_DHZW.csv')
df_DHZW_trips <- df_DHZW_trips %>%
filter(disp_activity == 'shopping' |
disp_activity == 'to work' |
disp_activity == 'sports/hobby')
df_DHZW_trips <- df_DHZW_trips %>%
select(agent_ID, hh_PC4, disp_arrival_PC4, disp_activity)
setwd(this.dir())
setwd('../DHZW_assign-travel-behaviours/data/codes')
DHZW_PC4_codes <-
read.csv("DHZW_PC4_codes.csv", sep = ";" , header = F)$V1
df_DHZW_trips[!(df_DHZW_trips$disp_arrival_PC4 %in% DHZW_PC4_codes),]$disp_arrival_PC4 <- 'outside DHZW'
df_shopping <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'shopping',]
df_sport <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'sports/hobby',]
df_work <- df_DHZW_trips[df_DHZW_trips$disp_activity == 'to work',]
df_shopping <- calculate_od_proportions(df_shopping)
df_sport <- calculate_od_proportions(df_sport)
df_work <- calculate_od_proportions(df_work)
# save
setwd(this.dir())
setwd('data/ODiN_destination_proportions')
write.csv(df_shopping, 'ODiN_shopping.csv', row.names = FALSE)
write.csv(df_sport, 'ODiN_sport.csv', row.names = FALSE)
write.csv(df_work, 'ODiN_work.csv', row.names = FALSE)
